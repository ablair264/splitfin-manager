/* NewProductCard.css - Exact specification from mockup */

/* 
 * IMPORTANT: Grid Layout Fix
 * When using NewProductCard in a grid, the container should use one of these classes:
 * - .product-grid
 * - .products-grid
 * 
 * The grid is limited to a maximum of 4 columns to prevent overlapping
 * when the sidebar collapses. Breakpoints:
 * - 4 columns: 1340px+ (max 4 to prevent 5 columns on sidebar collapse)
 * - 3 columns: 1020px-1339px
 * - 2 columns: 680px-1019px
 * - 1 column: <680px
 */

/* Main Product Card */
.new-product-card {
  width: 100%; /* Make fully responsive */
  min-width: 280px; /* Reduced minimum width */
  max-width: 320px; /* Max width for larger screens */
  height: 420px;
  background: linear-gradient(135deg, #242a34 0%, #1a1f2a 50%, #202630 100%);
  border-radius: 16px;
  padding: 0;
  overflow: hidden;
  position: relative;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  margin: 0 auto; /* Center card in its grid cell */
}

.new-product-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  z-index: 1;
}

/* Selected State */
.new-product-card.selected {
  border: 2px solid #57b6b9;
  box-shadow: 0 8px 32px rgba(87, 182, 185, 0.3);
}

/* Image Section */
.product-image-section {
  position: relative;
  width: calc(100% - 28px); /* Responsive width with margins */
  height: 205px;
  margin: 14px auto 0; /* Center the image area with proper spacing */
  border-radius: 12px;
  overflow: hidden;
  background: #f5f5f5;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Subtle gradient overlay only at bottom for text readability */
.product-image-section::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.2) 100%);
  pointer-events: none;
  z-index: 1;
}

.product-image {
  width: 100%;
  height: 100%;
  object-fit: contain;
  position: relative;
  z-index: 0;
}

/* Image Loading and Placeholder */
.image-loading,
.image-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  color: #9ca3af;
  font-size: 16px;
  font-weight: 500;
  background: #f3f4f6;
}

.loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid rgba(16, 185, 129, 0.2);
  border-top: 3px solid #10b981;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Stock Badge */
.stock-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  padding: 6px 12px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 600;
  z-index: 10;
  color: white;
  white-space: nowrap;
}

.stock-badge.in-stock {
  background: #10b981;
}

.stock-badge.out-of-stock {
  background: #c16334;
}

/* Product Name - positioned at bottom of image area */
.product-name {
  position: absolute;
  bottom: 10px;
  left: 12px;
  right: 12px;
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
  margin: 0;
  line-height: 1.2;
  z-index: 2;
  /* Better readability */
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.9), 0 0 8px rgba(255, 255, 255, 0.8);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Product Info Section */
.product-info {
  padding: 14px 16px;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Info Grid - SKU/EAN and Category/Packing Units */
.product-details-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 6px;
}

.product-sku,
.product-ean,
.product-category,
.product-packing {
  font-size: 11px;
  color: #9ca3af;
  margin: 0;
  line-height: 1.3;
}

.product-sku::before {
  content: 'SKU: ';
  color: #6b7280;
  font-weight: 600;
}

.product-ean::before {
  content: 'EAN: ';
  color: #6b7280;
  font-weight: 600;
}

.product-sku,
.product-category {
  text-align: left;
}

.product-ean,
.product-packing {
  text-align: right;
}

/* Pricing Section */
.pricing-section {
  margin-bottom: 10px;
}

.product-price {
  font-size: 24px;
  font-weight: 700;
  color: #10b981;
  margin: 0 0 4px 0;
  line-height: 1;
}

.product-retail-price {
  font-size: 14px;
  color: #9ca3af;
  margin: 0;
  line-height: 1;
  display: flex;
  align-items: center;
  gap: 4px;
}

.product-retail-price::before {
  content: 'RRP: ';
  font-weight: 600;
  color: #6b7280;
}

/* Action Buttons Row 1 - View More and Catalogue (smaller, icon-only) */
.action-buttons-top {
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
  justify-content: flex-end;
}

.view-btn,
.catalogue-btn {
  width: 32px;
  height: 32px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 16px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.view-btn {
  background: #6b7280;
  width: auto;
  padding: 0 12px;
  font-size: 12px;
  font-weight: 600;
}

.view-btn:hover {
  background: #4b5563;
  transform: translateY(-1px);
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
}

.catalogue-btn {
  background: #3b82f6;
}

.catalogue-btn:hover {
  background: #2563eb;
  transform: translateY(-1px);
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
}

/* Bottom Row - Quantity Selector and Main Action Buttons */
.bottom-controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-top: auto;
}

/* Quantity Selector */
.quantity-selector {
  display: flex;
  align-items: center;
  gap: 0;
  border-radius: 6px;
  overflow: hidden;
}

.qty-btn {
  width: 32px;
  height: 32px;
  background: #374151;
  border: none;
  color: white;
  cursor: pointer;
  font-size: 18px;
  font-weight: 600;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.qty-btn:hover:not(:disabled) {
  background: #4b5563;
}

.qty-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.qty-input {
  width: 45px;
  height: 32px;
  background: #1f2937;
  border: none;
  color: white;
  text-align: center;
  font-size: 16px;
  font-weight: 600;
  outline: none;
  -moz-appearance: textfield;
}

/* Hide number input arrows */
.qty-input::-webkit-outer-spin-button,
.qty-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.qty-input:focus {
  background: #374151;
}

/* Main Action Buttons */
.main-actions {
  display: flex;
  gap: 8px;
}

.add-btn {
  background: #10b981;
  color: white;
  border: none;
  padding: 8px 14px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  height: 32px;
  white-space: nowrap;
  box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
}

.add-btn:hover {
  background: #059669;
  transform: translateY(-1px);
  box-shadow: 0 3px 6px rgba(16, 185, 129, 0.3);
}

.add-btn.selected {
  background: #059669;
}

.add-btn.animating {
  animation: addPulse 0.6s ease-out;
}

@keyframes addPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.remove-btn {
  background: #ef4444;
  color: white;
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2);
}

.remove-btn:hover:not(:disabled) {
  background: #dc2626;
  transform: translateY(-1px);
  box-shadow: 0 3px 6px rgba(239, 68, 68, 0.3);
}

.remove-btn:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.remove-btn:disabled:hover {
  background: #ef4444;
  transform: none;
  box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2);
}

/* Image Navigation (for multiple images) */
.image-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0, 0, 0, 0.5);
  border: none;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 10;
  opacity: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.new-product-card:hover .image-nav {
  opacity: 1;
}

.image-nav:hover {
  background: rgba(16, 185, 129, 0.8);
  transform: translateY(-50%) scale(1.1);
}

.prev-image {
  left: 8px;
}

.next-image {
  right: 8px;
}

.image-indicator {
  position: absolute;
  bottom: 8px;
  right: 8px;
  background: rgba(0, 0, 0, 0.6);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
}

/* New Badge */
.new-product-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: #10b981;
  color: white;
  padding: 4px 10px;
  border-radius: 8px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  z-index: 10;
}

/* Optional large size for detailed view or special layouts */
.new-product-card.large {
  width: 660px;
  height: 860px;
  border-radius: 20px;
}

.new-product-card.large .product-image-section {
  width: 602px;
  height: 421px;
  margin: 29px auto 0;
  border-radius: 16px;
}

.new-product-card.large .stock-badge {
  width: 107px;
  height: 61px;
  font-size: 18px;
  top: 20px;
  right: 20px;
  border-radius: 12px;
}

.new-product-card.large .stock-badge.out-of-stock {
  font-size: 16px;
}

.new-product-card.large .product-name {
  font-size: 32px;
  bottom: 20px;
  left: 24px;
  right: 24px;
}

.new-product-card.large .product-info {
  padding: 30px 40px;
  gap: 20px;
}

.new-product-card.large .product-details-grid {
  gap: 20px;
  margin-bottom: 10px;
}

.new-product-card.large .product-sku,
.new-product-card.large .product-ean,
.new-product-card.large .product-category,
.new-product-card.large .product-packing {
  font-size: 23px;
}

.new-product-card.large .product-price {
  font-size: 49px;
  margin: 0 0 8px 0;
}

.new-product-card.large .product-retail-price {
  font-size: 29px;
}

.new-product-card.large .action-buttons-top {
  gap: 16px;
  margin-bottom: 20px;
}

.new-product-card.large .view-btn,
.new-product-card.large .catalogue-btn {
  width: 60px;
  height: 45px;
  font-size: 20px;
  border-radius: 10px;
}

.new-product-card.large .bottom-controls {
  gap: 20px;
}

.new-product-card.large .qty-btn {
  width: 56px;
  height: 56px;
  font-size: 28px;
  border-radius: 8px;
}

.new-product-card.large .qty-input {
  width: 80px;
  height: 56px;
  font-size: 24px;
}

.new-product-card.large .add-btn {
  padding: 16px 28px;
  font-size: 20px;
  height: 56px;
  border-radius: 10px;
}

.new-product-card.large .remove-btn {
  width: 56px;
  height: 56px;
  font-size: 24px;
  border-radius: 10px;
}

.new-product-card.large .image-nav {
  width: 48px;
  height: 48px;
}

.new-product-card.large .prev-image {
  left: 12px;
}

.new-product-card.large .next-image {
  right: 12px;
}

.new-product-card.large .image-indicator {
  bottom: 12px;
  right: 12px;
  padding: 6px 12px;
  border-radius: 16px;
  font-size: 14px;
}

.new-product-card.large .new-product-badge {
  top: 20px;
  left: 20px;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 16px;
  letter-spacing: 0.8px;
}

/* Responsive adjustments */

/* Tablet optimizations */
@media (min-width: 768px) and (max-width: 1024px) {
  .new-product-card {
    min-width: 260px;
    max-width: 300px;
    height: 400px;
  }

  .product-image-section {
    height: 180px;
  }

  .product-info {
    padding: 12px 14px;
  }

  .product-price {
    font-size: 20px;
  }
}

@media (max-width: 768px) {
  .new-product-card {
    min-width: 280px;
    max-width: 300px;
    height: 400px;
  }

  .product-image-section {
    height: 190px;
  }

  .product-name {
    font-size: 15px;
  }

  .product-price {
    font-size: 22px;
  }

  .product-retail-price {
    font-size: 13px;
  }
}

@media (max-width: 480px) {
  .new-product-card {
    min-width: 260px;
    max-width: 280px;
    height: 380px;
  }

  .product-image-section {
    height: 175px;
  }

  .product-info {
    padding: 12px 16px;
  }

  .bottom-controls {
    flex-direction: column;
    gap: 8px;
  }

  .main-actions {
    width: 100%;
    justify-content: space-between;
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .new-product-card,
  .qty-btn,
  .add-btn,
  .view-btn,
  .catalogue-btn,
  .remove-btn {
    transition: none;
  }

  .new-product-card:hover {
    transform: none;
  }
}

/* Container adjustments to prevent overlapping */
.product-grid,
.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
  padding: 16px;
  position: relative;
  margin: 0 auto;
  max-width: 1440px; /* Limit container width */
  transition: all 0.3s ease; /* Smooth transition when sidebar toggles */
}

/* Force maximum 4 columns to prevent 5 columns when sidebar collapses */
@media (min-width: 1340px) {
  .product-grid,
  .products-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    padding: 20px;
  }
}

/* 3 columns on medium-large screens */
@media (min-width: 1020px) and (max-width: 1339px) {
  .product-grid,
  .products-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 18px;
    padding: 18px;
  }
}

/* Better iPad layout - 3 columns on larger tablets, 2 on smaller */
@media (min-width: 1024px) and (max-width: 1366px) {
  .product-grid,
  .products-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    padding: 16px;
  }
}

/* iPad Pro and larger tablets - better spacing */
@media (min-width: 768px) and (max-width: 1023px) {
  .product-grid,
  .products-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;
    padding: 14px;
  }
}

/* Standard iPad portrait and smaller tablets */
@media (min-width: 680px) and (max-width: 767px) {
  .product-grid,
  .products-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    padding: 16px;
  }
}

/* 1 column on mobile */
@media (max-width: 679px) {
  .product-grid,
  .products-grid {
    grid-template-columns: 1fr;
    padding: 12px;
    gap: 12px;
  }
}

/* Ensure dropdowns and tooltips have proper z-index */
.dropdown-menu,
.select-dropdown,
[role="tooltip"] {
  z-index: 1000;
}

/* When sidebar is collapsed, limit grid expansion */
.sidebar-collapsed .product-grid,
.sidebar-collapsed .products-grid,
body.sidebar-collapsed .product-grid,
body.sidebar-collapsed .products-grid {
  max-width: 1400px;
}

/* Alternative: class on main content area */
.main-content-expanded .product-grid,
.main-content-expanded .products-grid {
  max-width: 1400px;
}

/* Generic grid container fallback - apply these rules to any grid containing product cards */
[class*="grid"]:has(.new-product-card) {
  max-width: 1440px;
  margin: 0 auto;
}

/* If browser doesn't support :has(), use this class on grid containers */
.contains-product-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 20px;
  padding: 20px;
  max-width: 1440px;
  margin: 0 auto;
}

@media (min-width: 1340px) {
  .contains-product-cards {
    grid-template-columns: repeat(4, 1fr);
  }
}